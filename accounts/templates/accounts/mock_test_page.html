{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mock Test</title>
    <link rel="stylesheet" href="{% static 'css/mock_test_page.css' %}">
</head>
<body>
<div class="container">
    <h1 id="test-subject">Mock Test - {{ subject.name }}</h1>

    <div class="instructions">
        <p><strong>Instructions:</strong></p>
        <ul>
            <li>Ensure a stable internet connection.</li>
            <li>Read each question carefully.</li>
            <li>Do not refresh or close the window during the test.</li>
            <li>This test is time-bound (20 minutes).</li>
            <li>Do not use external help.</li>
            <li>Once submitted, answers cannot be changed.</li>
        </ul>
        <p><strong>Declaration:</strong> I understand and agree to follow the above rules.</p>
        <label><input type="checkbox" id="declaration" onchange="toggleStartButton()"> I agree</label>
        <br>
        <button id="start-button" onclick="startTest()" style="display: none;">Start Test</button>
    </div>

    <div id="timer" class="timer" style="display: none;">Time Left: <span id="time">20:00</span></div>

    <form id="test-form" style="display: none;">
        <div class="questions" id="questions">
            {% for question in questions %}
            <div class="question-block" data-correct="{{ question.correct_option }}">
                <p><strong>{{ forloop.counter }}. {{ question.text }}</strong></p>
                <div class="options">
                    <label><input type="radio" name="q{{ forloop.counter }}" value="{{ question.option1 }}"> {{ question.option1 }}</label><br>
                    <label><input type="radio" name="q{{ forloop.counter }}" value="{{ question.option2 }}"> {{ question.option2 }}</label><br>
                    {% if question.option3 %}
                        <label><input type="radio" name="q{{ forloop.counter }}" value="{{ question.option3 }}"> {{ question.option3 }}</label><br>
                    {% endif %}
                    {% if question.option4 %}
                        <label><input type="radio" name="q{{ forloop.counter }}" value="{{ question.option4 }}"> {{ question.option4 }}</label><br>
                    {% endif %}
                </div>
            </div>
            
            {% endfor %}
        </div>
        <button type="button" id="submit-button" onclick="submitTest()">Submit Test</button>
    </form>

    <div class="result" id="result" style="display: none;"></div>
    <div id="more-tests" style="display: none;">
        <button onclick="window.location.href='{% url 'mock_test' %}'">More Mock Tests</button>
    </div>
</div>

<script src="{% static 'js/mock_test_page.js' %}"></script>
</body>
</html>
